/* Webpack & Concatenate browser pack tool
 * Source Path:resource-app\script\groups.render.js
 * Target: node */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(global,(function(){return e={717:function(e){e.exports={renderTitle:function(){return requestIdleCallback(translation.translatePage),new Vue({el:".title",data:{app:{name:translation.translate("@{app.name}")}}})},renderSwitchButton:function(){translation.translateElement(".switch-button");for(var e=document.querySelectorAll(".switch-button-icon"),t=(window.innerWidth-52*e.length)/(e.length-1),n=0,r=e.length;n<r;++n)e[n].style.left=~~(n*(t+48))+"px",e[n].style.bottom="0px"},renderList:function(e){var t=new sdk.common.logger("render task"),n=window.innerHeight-38-48-20;t.info("Viewport height",n);var r=1+~~(n/40);t.info("Lists on screen",r);for(var o=0,i=[],s=0;s<r&&e[s];++s)i.push({img_src:"unknown.png",id:e[s][0],name:e[s][0],last_msg:new Date(e[s][1].last_msg||0).toISOString(),new_message_counts:e[s][1].msg_counts||0,list_id:s}),o=s;t.debug("Vue render");var a=new Vue({el:".groups-list",data:{visible_list:i},methods:{enterGroup:function(e){var t=e.target.getAttribute("data-id");t||(t=e.target.parentNode.getAttribute("data-id")),sdk.publish("user-enter-group",t)}}}),u=new IntersectionObserver((function(n){if(t.debug("intersection observer event emit"),++l>10)return u.unobserve(c),u.unobserve(d),t.warn("Too much intersection observer event emit."),void setTimeout((function(){u.observe(c),u.observe(d)}),2e4);n.forEach((function(n){if(n.target==d)for(var r=0;r<5&&e[o+1];r++)t.info("load list",e[o+1],o+1),o++,a.visible_list.push((i={img_src:"unknown.png",id:e[o][0],name:e[o][0],last_msg:new Date(e[o][1].last_msg||0).toISOString(),new_message_counts:e[o][1].msg_counts||0,list_id:o},s="id",u=e[o][0],s in i?Object.defineProperty(i,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):i.id=u,i));var i,s,u})),sdk.publish("user-group-list-update")})),l=0;setInterval((function(){l=0}),5e3);var c=document.querySelector("#top-sentinel"),d=document.querySelector("#bottom-sentinel");return u.observe(c),u.observe(d),a.visible_list},renderButtons:function(){translation.translateElement(".new-group")}}}},t={},function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(717);var e,t}));